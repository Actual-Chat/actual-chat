@inherits ComputedStateComponent<TodoSummary>
@inject ITodoService _todos
@inject Session _session
@inject ILogger<TodoSummaryBadge> _log

@{
    _log.LogInformation("Rendering");
    var summary = State.ValueOrDefault ?? new();
}

@if (summary != null) {
    <Badge Color="Color.Success"><b>@summary.DoneCount</b> done</Badge>
    <Badge Color="Color.Primary"><b>@summary.Count</b> total</Badge>
}

@code {
    protected override Task<TodoSummary> ComputeState(CancellationToken cancellationToken)
        => _todos.GetSummary(_session, cancellationToken);
}
