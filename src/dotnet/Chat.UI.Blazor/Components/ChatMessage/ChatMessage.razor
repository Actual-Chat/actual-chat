@namespace ActualChat.Chat.UI.Blazor

<div class="message">
    <span style="margin-right: 2px">
        <UserNameBadge UserId="@Entry.AuthorId"/>
    </span>
    @if (Entry.IsStreaming) {
        <ChatMessageTranscript StreamId="@Entry.StreamId" OnListen="@ListenCallback"/>
    }
    else {
        <ChatMessageText Text="@Entry.Content"/>
    }
</div>

@code {
    [Parameter]
    public ChatEntry Entry { get; set; } = null!;

    [Parameter]
    public EventCallback<string> OnListen { get; set; }

    private void ListenCallback(string streamId)
    {
        if(OnListen.HasDelegate)
            OnListen.InvokeAsync(streamId);
    }

}
