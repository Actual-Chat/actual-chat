@namespace ActualChat.Chat.UI.Blazor.Components
@using ActualChat.Comparison
@using ActualChat.Chat.UI.Blazor.Events

<OnUIEvent TEvent="@NavigateToChatEntryEvent" Handler="@OnNavigateToChatEntry" />
<VirtualList
    @key="@Chat.Id.Value"
    Class="chat-view"
    DataSource="@this"
    Identity="@Chat.Id"
    KeyComparer="@LongAsStringKeyComparer.Default"
    ItemVisibilityChanged="@OnItemVisibilityChanged"
    IsEmptyTest="IsEmpty" >
    <Item>
        <ChatMessage Context="_messageContext" Message="@context" />
    </Item>
    <Empty>
        <EmptyChatContent Chat="@Chat"/>
    </Empty>
    <Skeleton>
        <chat-message-skeleton />
    </Skeleton>
</VirtualList>

<RenderIntoStack Name="SubFooter" Order="-1000_000" Key="NavigateToEndSubFooter">
    <NavigateToUnreadOrEnd
        ChatSid="@Chat.Id"
        ChatView="@this" />
</RenderIntoStack>
