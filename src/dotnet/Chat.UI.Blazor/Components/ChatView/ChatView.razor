@namespace ActualChat.Chat.UI.Blazor.Components
@using ActualChat.Comparison

<VirtualList
    Class="chat-view"
    AlignmentEdge="VirtualListEdge.End"
    LoadZoneSize="2000" BufferZoneSize="4000" SpacerSize="2000" SkeletonCount="40"
    DataSource="GetMessages"
    KeyComparer="LongAsStringKeyComparer.Default"
    VisibleKeysState="VisibleKeysState">
    <Item>
        <ChatMessage Model="@context"/>
    </Item>
    <Skeleton>
        @{
            var rnd = new Random(Random.Shared.Next());
        }
        <div class="mx-4 my-2 flex items-start text-sm opacity-75 hover:opacity-100 animate-pulse">
            <div class="block bg-gray-200 w-10 h-10 rounded-full mr-3"></div>
            <div class="flex-1 overflow-hidden">
                <div class="flex-x">
                    <div class="font-bold bg-gray-200 rounded-md border-white border-2 w-32 h-4"></div>
                    <div class="bg-gray-200 w-10 h-4 rounded-md border-white border-2"></div>
                </div>
                <div class="leading-normal bg-gray-200 block h-4 rounded-md border-white border-2"
                     style="width: @(30 + rnd.Next(70))%;"></div>
            </div>
        </div>
    </Skeleton>
</VirtualList>
