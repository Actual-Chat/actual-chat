@namespace ActualChat.Chat.UI.Blazor.Components
@using ActualChat.Audio.UI.Blazor.Components
@inherits ComputedStateComponent<string>
@inject Session _session
@inject IChatUserSettings _chatUserSettings

<AudioRecorder ChatId="@ChatId" Language="@LanguageName"/>

@code {
    [Parameter]
    public string ChatId { get; set; } = "";

    public string LanguageName => State.LatestNonErrorValue;

    protected override async Task<string> ComputeState(CancellationToken cancellationToken)
    {
        var languageName = await _chatUserSettings.GetLanguage(_session, ChatId, cancellationToken);
        return languageName;
    }
}
