@namespace ActualChat.Chat.UI.Blazor.Components
@using ActualChat.UI.Blazor.Components
@using ActualChat.Hosting

<Dropdown ButtonClass="attach-btn btn-round" Class="flex h-full mx-0.5">
    <ButtonTemplate>
        <svg class="fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="-2 -2 28 28">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.2935 21C7.6375 21 6.0635 20.334 4.8615 19.125C2.4735 16.722 2.3755 12.912 4.6425 10.631L12.0285 3.201C12.7975 2.427 13.8355 2 14.9505 2C16.1435 2 17.2775 2.479 18.1425 3.349C19.8635 5.08 19.9295 7.831 18.2885 9.481L10.8935 16.91C10.4145 17.393 9.7695 17.658 9.0775 17.658C8.3465 17.658 7.6535 17.366 7.1275 16.837C6.0745 15.776 6.0415 14.085 7.0545 13.065L13.8795 6.21C14.2695 5.818 14.9015 5.816 15.2935 6.206C15.6845 6.596 15.6865 7.229 15.2965 7.62L8.4725 14.476C8.2325 14.718 8.2655 15.145 8.5465 15.427C8.6925 15.574 8.8865 15.658 9.0775 15.658C9.1875 15.658 9.3455 15.631 9.4755 15.5L16.8705 8.071C17.7375 7.198 17.6725 5.713 16.7245 4.759C15.8175 3.847 14.2785 3.775 13.4465 4.611L6.0605 12.041C4.5665 13.544 4.6645 16.09 6.2805 17.715C7.1035 18.544 8.1735 19 9.2935 19C10.2945 19 11.2225 18.622 11.9045 17.936L19.2915 10.506C19.6805 10.115 20.3135 10.112 20.7055 10.502C21.0965 10.892 21.0985 11.524 20.7095 11.916L13.3225 19.346C12.2625 20.412 10.8315 21 9.2935 21Z"/>
        </svg>
    </ButtonTemplate>
    <MenuTemplate>
        <Menu Class="attach-dropdown-menu" ItemClass="text-left" TooltipPosition="MenuTooltipPosition.Top">
            <MenuItem Title="Upload File" Name="uploadFile" Click="@UploadFilesRequested">
                <Icon>
                    <svg class="fill-current h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="-2 -2 28 28">
                        <path d="M19.479 10.092c-.212-3.951-3.473-7.092-7.479-7.092-4.005 0-7.267 3.141-7.479 7.092-2.57.463-4.521 2.706-4.521 5.408 0 3.037 2.463 5.5 5.5 5.5h13c3.037 0 5.5-2.463 5.5-5.5 0-2.702-1.951-4.945-4.521-5.408zm-7.479-1.092l4 4h-3v4h-2v-4h-3l4-4z"/>
                    </svg>
                </Icon>
            </MenuItem>
            @if (HostInfo.IsDevelopmentInstance) {
                <MenuItem Title="Use Camera" Name="useCamera">
                    <Icon>
                        <svg class="fill-current h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="-2 -2 28 28">
                            <path d="M4.348 21.241l4.185-7.249 5.67 9.806c-.714.133-1.45.202-2.203.202-2.907 0-5.575-1.036-7.652-2.759zm18.97-5.247c-1.182 3.345-3.806 6.012-7.124 7.252l-4.187-7.252h11.311zm-14.786-6l-5.656 9.797c-1.793-2.097-2.876-4.819-2.876-7.791 0-.684.057-1.354.167-2.006h8.365zm12.583-5.795c1.798 2.098 2.885 4.824 2.885 7.801 0 .679-.057 1.345-.165 1.994h-8.373l5.653-9.795zm-11.305-3.999c.71-.131 1.442-.2 2.19-.2 2.903 0 5.566 1.033 7.642 2.751l-4.18 7.24-5.652-9.791zm2.19 7.794h-11.314c1.186-3.344 3.812-6.008 7.132-7.244l4.182 7.244z"/>
                        </svg>
                    </Icon>
                </MenuItem>
                <MenuItem Title="Change Theme" Name="changeTheme">
                    <Icon>
                        <svg class="fill-current h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="-2 -2 28 28">
                            <path d="M9 12c0-.552.448-1 1.001-1s.999.448.999 1-.446 1-.999 1-1.001-.448-1.001-1zm6.2 0l-1.7 2.6-1.3-1.6-3.2 4h10l-3.8-5zm8.8-5v14h-20v-3h-4v-15h21v4h3zm-20 9v-9h15v-2h-17v11h2zm18-7h-16v10h16v-10z"/>
                        </svg>
                    </Icon>
                </MenuItem>
            }
        </Menu>
    </MenuTemplate>
</Dropdown>

@code {
    [Inject] private HostInfo HostInfo { get; init; } = null!;

    [Parameter] public EventCallback UploadFilesRequested { get; set; }
}
