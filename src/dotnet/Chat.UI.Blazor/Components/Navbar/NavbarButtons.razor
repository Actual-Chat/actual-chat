@using ActualChat.Hosting
@using ActualChat.UI.Blazor.Services
@using ActualChat.Users
@using ActualChat.Chat.UI.Blazor.Components.NewChat
@namespace ActualChat.Chat.UI.Blazor.Components
@inherits OwnAccountComponentBase
@{
    var m = State.Value;
}

<NavbarButton
    Tooltip="Create"
    Click="OnCreateChatClick">
    <i class="icon-plus text-2xl font-medium"></i>
</NavbarButton>

<ChatsNavbarButton/>

@if (m.IsAdmin) {
    <NavbarGroupSelectionButton
        Title="Administration"
        Id="@NavbarGroupIds.Administration"
        Tooltip="Administration">
        <i class="icon-adminx-1 text-2xl font-medium"></i>
    </NavbarGroupSelectionButton>
}
@if (HostInfo.IsDevelopmentInstance) {
    <NavbarGroupSelectionButton
        Title="Test Pages"
        Id="@NavbarGroupIds.TestPages"
        Tooltip="Test Pages">
        <i class="icon-alert-triangle text-2xl font-medium"></i>
    </NavbarGroupSelectionButton>
}

@code {
    [Inject] private ModalUI ModalUI { get; init; } = null!;

    private Task OnCreateChatClick()
        => ModalUI.Show(new NewChatModal.Model());
}
