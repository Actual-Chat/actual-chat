@namespace ActualChat.Chat.UI.Blazor.Components
@inherits MenuBase

<MenuEntry
    Icon="icon-conversation"
    Text="New chat"
    Click="OnCreateChatClick">
</MenuEntry>
<MenuEntry
    Icon="icon-people"
    Text="New Place"
    Click="OnCreatePlaceClick">
</MenuEntry>

@code {
    [Inject] private ChatHub ChatHub { get; init; } = null!;

    private void OnCreateChatClick()
        => ChatHub.ModalUI.Show(new NewChatModal.Model(ChatHub.ChatUI.SelectedPlaceId.Value));

    private void OnCreatePlaceClick() {
        _ = ChatHub.UICommander.Run(new Places_Change(ChatHub.Session, default, default, new Change<PlaceDiff>() {
            Create = new PlaceDiff() {
                Title = "New Place " + ChatHub.Clocks.SystemClock.Now.ToString("g"),
                IsPublic = true,
            }
        }));
    }

}
