@namespace ActualChat.Chat.UI.Blazor.Components
@inherits ContextMenuBase

@if (_chat != null) {
    <CascadingValue Value="@_chat">
        <ChatContextMenuContent />
    </CascadingValue>
}

@code {
    private Chat? _chat;

    [Inject] private IChats Chats { get; init; } = null!;
    [Inject] private Session Session { get; init; } = null!;

    protected override async Task OnParametersSetAsync() {
        if (!Argument.IsNullOrEmpty()) {
            _chat = await Chats.Get(Session, Argument, CancellationToken.None);
        }
    }
}
