@page "/test/fusion"

<MainHeader>Fusion Test Page</MainHeader>

<Button Click="OnInvalidateEverythingClick">Invalidate Everything</Button>
<Button Click="OnGCCollectClick">GC.Collect() x 3</Button>

@code {
    private Task OnInvalidateEverythingClick() {
        ComputedRegistry.Instance.InvalidateEverything();
        return Task.CompletedTask;
    }

    private async Task OnGCCollectClick() {
        for (var i = 0; i < 3; i++) {
            if (i != 0)
                await Task.Delay(500);
            GC.Collect();
        }
    }
}
