@inherits ComputedStateComponent<Moment>
@{
    var time = State.ValueOrDefault;
    var second = (long) time.ToDateTime().TimeOfDay.TotalSeconds;
}

<RenderIntoSlot Name="TestHeader">
    Header: <TestTimer UpdatePeriod="3"/> + @time.ToString("F")
</RenderIntoSlot>

@if (second / 3 % 2 == 0) {
    <RenderIntoStack Name="TestFooter" MustPrepend="true">
        Footer 3/2: <TestTimer UpdatePeriod="3"/>
    </RenderIntoStack>
}
@if (second / 5 % 2 == 0) {
    <RenderIntoStack Name="TestFooter" MustPrepend="true">
        Footer 5/2: <TestTimer UpdatePeriod="5"/>
    </RenderIntoStack>
}
<RenderIntoStack Name="TestFooter" Order="1">
    Footer 1: <TestTimer UpdatePeriod="1"/>
</RenderIntoStack>

Content: @DateTime.Now.ToString("F")

@code {
    [Inject] private IFusionTime FusionTime { get; init; } = null!;

    protected override async Task<Moment> ComputeState(CancellationToken cancellationToken)
        => await FusionTime.GetUtcNow(TimeSpan.FromSeconds(1)).ConfigureAwait(false);
}
