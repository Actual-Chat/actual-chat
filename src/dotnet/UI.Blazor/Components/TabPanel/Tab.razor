@namespace ActualChat.UI.Blazor.Components

@if (Panel.ActiveTab == this) {
    <div class="tab @Class">
        @ChildContent
    </div>
}

@code {
    [CascadingParameter] public TabPanel Panel { get; set; } = null!;
    [Parameter] public string Id { get; set; } = "";
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Class { get; set; } = "";
    [Parameter] public string ButtonClass { get; set; } = "";
    [Parameter] public RenderFragment? ChildContent { get; set; }

    protected override void OnInitialized() {
        if (Panel == null)
            throw new InvalidOperationException("<Tab> component must be nested into <TabPanel> component.");
        Panel.RegisterTab(this);
    }
}
