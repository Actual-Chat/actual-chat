@implements IDisposable
@using ActualChat.UI.Blazor.Services
@{
    var items = RenderVars.RenderSlot(Name);
    items.Set(r => r.Value.Add(this)); // Set also invalidates mutable state in any case
}
@code {
    [Inject] private RenderVars RenderVars { get; init; } = null!;

    [Parameter, EditorRequired] public string Name { get; set; } = "";
    [Parameter] public RenderFragment? ChildContent { get; set; }

    public bool IsDisposed { get; private set; }

    public void Dispose() {
        IsDisposed = true;
        var items = RenderVars.RenderSlot(Name);
        items.Set(r => r.Value.Remove(this));
    }
}
