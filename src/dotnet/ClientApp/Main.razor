@using ActualChat.UI.Blazor.App
@namespace ActualChat.ClientApp

<App SessionId="@_sessionId" />

@code {
    private string _sessionId = Session.Default.Id.Value;

    protected override void OnInitialized()
	{
		// TODO: make it better
		if (_sessionId == Session.Default.Id.Value){
			string path = Path.Combine(FileSystem.AppDataDirectory, "session.txt");
			if (File.Exists(path)){
                // read synchronously on purpose: to avoid preliminary rendering
                _sessionId = File.ReadAllText(path);
            }
		}
	}
}
