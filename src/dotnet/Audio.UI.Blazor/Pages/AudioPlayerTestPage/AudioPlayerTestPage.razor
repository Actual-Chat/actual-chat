@namespace ActualChat.Audio.UI.Blazor.Pages
@page "/test/audio-player"

<div class="px-6 pt-6 flex flex-col">
    <h1 class="block text-3xl text-bold mb-6">Audio player test page</h1>
    <div class="mt-1 text-xl text-bold">
        <label for="url">URL:</label>
        <input id="url" class="w-full mt-1 p-1 text-lg bg-gray-50 focus:outline-none border border-gray-200 rounded text-gray-600" type="text" placeholder="Put a webm url here..." @bind="@_uri" @bind:event="oninput">
    </div>
    <div class="mt-6 text-xl text-bold bg-green-50 p-3 rounded-2xl">
        <p class="text-2xl text-bold mb-3 text-indigo-500">Our players:</p>
        <p>IsPlaying: @_isPlaying</p>
        <p>MediaElementReadyState: @ToMediaElementReadyState(_prevMediaElementReadyState)</p>
        <p>Offset: @_offset</p>
        @if (_isPlaying) {
            <button onclick="@(() => OnClick(true))" class="mt-3 px-8 py-1 text-gray-50 rounded-md bg-red-700">Stop</button>    
        } else {
            <button onclick="@(() => OnClick(true))" class="mt-3 px-8 py-1 text-gray-50 rounded-md bg-blue-700">@(_isPlaying ? "Stop" : "MSE")</button>
            <button onclick="@(() => OnClick(false))" class="mt-3 px-8 py-1 text-gray-50 rounded-md bg-purple-700">@(_isPlaying ? "Stop" : "AudioContext")</button>
        }
    </div>
    <div class="mt-6 bg-red-50 rounded-2xl p-3">
        <p class="text-2xl text-bold text-indigo-500 mb-3">Default &lt;audio&gt; player:</p>
        <audio controls="" name="media">
            <source src="@_uri" type="audio/webm">
        </audio>
    </div>
</div>
